<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protocol Initialization | AI TASK IQ</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="bg-glow-orb"></div>
    <div class="scanlines"></div>

    <nav class="glass-nav">
        <a href="index.html" class="logo">AI TASK IQ <span class="blink">_</span></a>
        <a href="index.html" class="cta-button-ghost">Return to Base</a>
    </nav>

    <div class="container protocol-container">
        <div class="glass-panel">
            <!-- ROI Flasher -->
            <div class="roi-flasher">
                <span class="blink status-text">âš  COMPLETE
                    PROTOCOL TO UNLOCK ROI MATRIX</span>
            </div>

            <h2 class="section-title">INITIALIZE PROTOCOL</h2>
            <p class="section-subtitle">
                Configure the parameters for your autonomous deployment.
            </p>

            <form id="mission-uplink" onsubmit="transmitMission(event)">

                <div class="form-group">
                    <label for="sector" class="form-label">01 // TARGET_SECTOR</label>
                    <select id="sector" class="glass-input" required>
                        <option value="" disabled selected>Select Sector...</option>
                        <option value="Legal">Legal Services</option>
                        <option value="Medical">Healthcare / Medical</option>
                        <option value="Construction">Construction / AEC</option>
                        <option value="Real Estate">Real Estate</option>
                        <option value="Finance">Finance</option>
                        <option value="Ecommerce">E-commerce</option>
                        <option value="Agencies">Agencies</option>
                        <option value="HR">HR</option>
                        <option value="Consulting">Consulting</option>
                        <option value="Sales">High-Ticket Sales</option>
                        <option value="Logistics">Logistics / Transport</option>
                        <option value="Hospitality">Hospitality / Events</option>
                        <option value="Other">Other / Classified</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="objective" class="form-label">02 // MISSION_OBJECTIVE</label>
                    <textarea id="objective" class="glass-input" rows="4" required
                        placeholder="Describe the inefficiency you wish to eliminate..."></textarea>
                </div>

                <div class="form-group">
                    <label for="email" class="form-label">03 // CONTACT_UPLINK</label>
                    <input type="email" id="email" placeholder="agent@company.com" class="glass-input" required>
                </div>

                <button type="submit" id="transmit-btn" class="cta-button-primary full-width flex-center">
                    TRANSMIT REQUEST
                </button>
                <p id="status-msg" class="status-msg">
                </p>

            </form>

            <script>
                async function transmitMission(e) {
                    e.preventDefault();

                    const btn = document.getElementById('transmit-btn');
                    const status = document.getElementById('status-msg');

                    // 1. Lock UI
                    btn.disabled = true;
                    btn.innerHTML = 'ESTABLISHING UPLINK... <span class="blink">_</span>';
                    status.style.color = 'var(--text-gray)';
                    status.innerText = 'Encrypting payload...';

                    // 2. Gather Data
                    const payload = {
                        sector: document.getElementById('sector').value,
                        objective: document.getElementById('objective').value,
                        email: document.getElementById('email').value,
                        timestamp: new Date().toISOString()
                    };

                    // 3. Define Webhook (Replace this with your LIVE n8n Webhook URL)
                    const WEBHOOK_URL = 'https://YOUR_N8N_INSTANCE_URL/webhook/lead-intake';

                    try {
                        // Simulating network delay for effect (Remove this setTimeout in production if desired)
                        await new Promise(r => setTimeout(r, 1500));

                        // Uncomment this to actually send data when you have the URL
                        // const response = await fetch(WEBHOOK_URL, {
                        //     method: 'POST',
                        //     headers: { 'Content-Type': 'application/json' },
                        //     body: JSON.stringify(payload)
                        // });

                        // if (!response.ok) throw new Error('Uplink failed');

                        // 4. Success State
                        btn.innerHTML = 'TRANSMISSION COMPLETE';
                        btn.style.background = 'var(--success-green, #27c93f)';
                        btn.style.borderColor = '#27c93f';
                        status.style.color = '#27c93f';
                        status.innerText = '// ACKNOWLEDGED. AGENT ASSIGNED.';

                        // Optional: Reset form after delay
                        // setTimeout(() => { ... }, 5000);

                    } catch (error) {
                        console.error(error);
                        btn.disabled = false;
                        btn.innerHTML = 'RETRY TRANSMISSION';
                        status.style.color = 'red';
                        status.innerText = 'ERROR: SIGNAL LOST. CHECK LOGS.';
                    }
                }
            </script>
        </div>
    </div>

</body>

</html>